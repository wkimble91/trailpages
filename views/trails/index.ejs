<% layout('layouts/index-boilerplate')%>
<div id="cluster-map" class="mb-2"></div>
<div class="container mb-5">
    <h1 id="welcome" class="text-center">Welcome To Trail Pages!</h1>
    <p class="text-center ">View our hand-made trails from all over the country</p>
</div>
<div class="container">
    <% for (let trail of trails) {%>
    <div class="card mb-2">
        <div class="row">
            <div class="col-md-4">
                <% if(trail.images.length) { %>
                <img class="img-fluid" alt="" src="<%= trail.images[0].url%>">
                <% } else { %>
                <img class="img-fluid" alt="" src="">
                <% } %>
            </div>
            <div class="col-md-8">
                <div class="card-body">
                    <strong>
                        <h4 class="card-title"><%= trail.title %></h4>
                    </strong>
                    <p class="card-text"><%= trail.description %></p>
                    <p class="card-text"><small class="text-muted"><%=trail.location%></small></p>
                    <a class="btn btn-success mt-xl-4" href="/trails/<%= trail._id %>">View
                        <%= trail.title %> </a>
                </div>
            </div>
        </div>
    </div>
    <% } %>
</div>

<script>
    const mapToken='<%-process.env.MAPBOX_TOKEN%>';
    const trails={ features:<%- JSON.stringify(trails)%>};
    console.log(trail);
</script>
<script src="js/clusterMap.js"></script>